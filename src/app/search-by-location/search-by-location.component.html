<div class="main ml-[17vw] mt-2 m-0">
  <form [formGroup]="locationForm" (ngSubmit)="onSubmit()" class="flex flex-col md:flex-row items-center gap-4 bg-white shadow-lg rounded-lg p-4 py-3 w-full relative border-2 border-gray-200">
    <div class="flex flex-col w-full md:w-1/6">
      <label for="lat" class="text-xs font-semibold text-gray-700 mb-1">Latitude</label>
      <input type="number" id="lat" formControlName="lat" class="border border-gray-900 rounded pl-1 py-1 w-full outline-none" />
      <div *ngIf="locationForm.get('lat')?.invalid && (locationForm.get('lat')?.dirty || locationForm.get('lat')?.touched)">
        <div *ngIf="locationForm.get('lat')?.errors?.['required']" class="text-red-500 text-xs mt-1">Latitude is required</div>
      </div>
    </div>

    <div class="flex flex-col w-full md:w-1/6">
      <label for="lng" class="text-xs font-semibold text-gray-700 mb-1">Longitude</label>
      <input type="number" id="lng" formControlName="lng" class="border border-gray-900 rounded pl-1 py-1 w-full focus:outline-none outline-none" />
      <div *ngIf="locationForm.get('lng')?.invalid && (locationForm.get('lng')?.dirty || locationForm.get('lng')?.touched)">
        <div *ngIf="locationForm.get('lng')?.errors?.['required']" class="text-red-500 text-xs mt-1">Longitude is required</div>
      </div>
    </div>

    <div class="flex flex-col w-full md:w-1/2">
      <label for="addressInput" class="text-xs font-semibold text-gray-700 mb-1">Address</label>
      <input type="text" id="addressInput" #addressInput formControlName="address" class="border border-gray-900 pl-2 py-1 rounded w-full outline-none" />
      <div *ngIf="locationForm.get('address')?.invalid && (locationForm.get('address')?.dirty || locationForm.get('address')?.touched)">
        <div *ngIf="locationForm.get('address')?.errors?.['required']" class="text-red-500 text-xs mt-1">Address is required</div>
      </div>
    </div>

    <button type="submit" class="bg-blue-600 text-white text-xs px-4 py-2 font-semibold rounded hover:bg-blue-700 transition duration-200 w-full md:w-auto mt-3 md:mt-0 outline-none">
      Search
    </button>
  </form>

  <div class="text-end mt-2">
    <button (click)="getLocation()" class="text-xs px-4 py-1 bg-green-600 hover:bg-green-700 text-white font-semibold rounded transition duration-200">
      𖦏 &nbsp; Use My Location
    </button>
  </div>

  <div *ngIf="isLoading" class="mt-3 text-center">
    Loading map...
    <div class="loader"></div>
  </div>

    <div *ngIf="message" class="mt-3 text-red-500 text-center">
        {{ message }}
    </div>

  <div *ngIf="latitude && longitude && !isLoading" class="mt-3">
    <div id="map" #map class="w-full h-[70vh] rounded-lg shadow-lg"></div>
  </div>
</div>